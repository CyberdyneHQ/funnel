{% extends "layout.html.jinja2" %}
{% block title %}{% trans %}Labels{% endtrans %} &ndash; {{ project.title }}{% endblock %}

{% block top_title %}
  <h1 class="mui--text-display1">{{ project.title|e }}</h1>
  <p class="mui--text-headline">Manage labels</p>
{% endblock %}

{% block contentwrapper %}
  <div class="grid">
    {%- for label in labels %}
      <div class="grid__col-xs-12 grid__col-sm-4">
        <div class="card">
          <div class="card__header">
            <h3>{{ label.title }}</h3>
            <div class="mui--text-body2">{{ label.description }}</div>
          </div>
          {% if label.is_parent %}
            <div class="card__body card__body--lgtext mui--text-subhead">
              <ol class="mui-list--aligned mui-list--border">
                {%- for sublabel in label.children %}
                  <li>
                    <span class="mui--text-subhead"><strong>{{ sublabel.title }}</strong></span>
                    <span class="mui--pull-right">
                      <a data-href="{{ sublabel.url_for('edit') }}" title="{% trans %}Edit{% endtrans %}" id="edit-label-btn"><i class="material-icons mui--text-subhead mui--align-top left-margin">edit</i></a>
                      <a href="{{ sublabel.url_for('delete') }}" title="{% trans %}Delete{% endtrans %}"><i class="material-icons mui--text-subhead mui--align-top left-margin">delete</i></a>
                    </span>
                  </li>
                {% else %}
                  <li class="mui--text-subhead"><em>{% trans %}(No labels){% endtrans %}</em></li>
                {%- endfor %}
              </ol>
            </div>
            <div class="mui-divider"></div>
          {% endif %}
          <div class="card__footer">
            <a class="mui-btn mui-btn--small mui-btn--flat mui-btn--primary" data-href="{{ project.url_for('new_label') }}" title="{% trans %}Add label{% endtrans %}" id="add-label-btn">{% trans %}Add label{% endtrans %}</a>
            <a class="mui-btn mui-btn--small mui-btn--flat mui-btn--accent" href="{{ label.url_for('edit') }}" title="{% trans %}Edit{% endtrans %}">{% trans %}Edit label{% endtrans %}</a>
          </div>
        </div>
      </div>
    {%- endfor %}
    <div class="grid__col-xs-12 grid__col-sm-4">
      <div class="clickable-card card" data-href="{{ project.url_for('new_label') }}" title="New label">
        <div class="card__image-wrapper">
          <div class="card__image--default card__image--new">
            <img class="card__image" src="{{ url_for('static', filename='img/card-background.png') }}" alt="new"/>
            <p class="card__image__tagline mui--text-display1">+</p>
          </div>
        </div>
        <div class="card__title">
          <h3 class="mui--text-title card__title__heading mui--text-bold">Create a new label</h3>
        </div>
        <div class="card__footer">
          <a href="{{ project.url_for('new_label') }}" class="mui-btn mui-btn--small mui-btn--flat mui-btn--primary" title="New labelset" data-action="New labelset">Add</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
